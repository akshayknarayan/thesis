\documentclass[fontsize=12pt,paper=letter,twosided,cleardoublepage=plain,final]{scrbook}
\input{packages}

% for 1.5 line spacing
\usepackage{setspace}
\onehalfspacing
% single spacing for table of contents
\AfterTOCHead{\singlespacing}

% recompute page layout based on the above
\recalctypearea

% in thesis: titlehead, subject, title, subtitle
\title{Enabling Configurable, Extensible, and Modular Network Stacks}
\author{Akshay Narayan}
\begin{document}

\frontmatter

% always arabic page numbering (default is roman in \frontmatter)
\pagenumbering{arabic}

\includepdf[pages=-]{./thesis-titlepage.pdf}
\cleardoublepage

\includepdf[pages=-,pagecommand={}]{./thesis-abstract.pdf}
\cleardoublepage

\section*{Acknowledgments}
\begin{spacing}{1}
%\input{00-acknowledgements.tex}
    To do.
\end{spacing}
\cleardoublepage

\section*{Prior Publication}
Parts of this thesis were previously published in part in workshop papers~\cite{ccp, bertha} and in conference
papers~\cite{ccp, bundler, park}.
\cleardoublepage

\tableofcontents

\mainmatter

\chapter{Introduction}\label{s:intro}

\input{intro.tex}

\chapter{Background}\label{s:background}
\input{background.tex}

\chapter{Bertha}\label{s:bertha}

\input{bertha/s1_intro.tex}
%\afterpage{\FloatBarrier}
%\afterpage{\clearpage}
\input{bertha/s2_motivation_related}
%\afterpage{\FloatBarrier}
%\afterpage{\clearpage}
\input{bertha/s3_design}
%\afterpage{\FloatBarrier}
%\afterpage{\clearpage}
\input{bertha/s4_impl}
%\afterpage{\FloatBarrier}
%\afterpage{\clearpage}
\input{bertha/s5_case-studies}
%\afterpage{\FloatBarrier}
%\afterpage{\clearpage}
\input{bertha/s6_discussion}
%\afterpage{\FloatBarrier}
%\afterpage{\clearpage}

\chapter{CCP}\label{s:ccp}

\input{ccp/intro}
%\afterpage{\FloatBarrier}
%\afterpage{\clearpage}
\input{ccp/related}
%\afterpage{\FloatBarrier}
%\afterpage{\clearpage}
\input{ccp/design}
\input{ccp/ccp}
\input{ccp/datapath}
\input{ccp/eval}
\input{ccp/capabilities}
\input{ccp-capabilities-park}
\input{ccp/concl}

\chapter{Conclusion}\label{s:thesis-concl}
\input{conclusion}

\backmatter

% single spacing for bibliography
\begin{spacing}{1}
%\printbibliography
    \bibliographystyle{abbrv}
\bibliography{thesis}
\end{spacing}

\end{document}
