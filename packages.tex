\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{graphicx, xspace, xcolor, cite, url}
\usepackage[margin=1in
  %,showframe% <- only to show the page layout
]{geometry}
\usepackage[draft=false]{hyperref}
\hypersetup{%
  colorlinks=true,      % false: boxed links; true: colored links
  linkcolor=blue,       % color of internal links
  citecolor=magenta,    % color of links to bibliography
  filecolor=cyan,       % color of file links
  urlcolor=blue          % color of external links
}
\usepackage[hyperref]{backref}
\usepackage[anythingbreaks]{breakurl}
\usepackage{etoolbox}
\appto\UrlBreaks{\do\-}
\usepackage[htt]{hyphenat}

%\usepackage{minted}
%\usemintedstyle{vs}
%\usepackage{fancyvrb}
%\usepackage{booktabs}
%\usepackage{tabu}
%\usepackage{tabularx}
%\usepackage{subcaption}
%\usepackage{paralist}

% more colors (like RedOrange)
\usepackage[dvipsnames]{xcolor}

% qualitative colors
% subset of https://jfly.uni-koeln.de/color/
% that is also distinctive in grayscale
\definecolor{set1}{HTML}{0071b2} % blue
\definecolor{set2}{HTML}{e59c00} % orange
\definecolor{set3}{HTML}{009e73} % green
\definecolor{set4}{HTML}{efe440} % yellow

% so we can splice in PDFs
\usepackage{pdfpages}

% set up bibliography
\usepackage[
  backend=bibtex,
  sortcites=true,
  sorting=ynt,
  abbreviate=false,
  style=numeric,
  citestyle=numeric,
  isbn=false,
  url=false,
  doi=false]{biblatex}
\addbibresource{bibliography.bib}

% enumerate* and itemize*
\usepackage[inline]{enumitem}

% for \begin{comment}
\usepackage{verbatim}

% for source-code listings
\usepackage[newfloat,draft=false]{minted}

% for formulas
\usepackage{mathtools}

% to split lists into multiple columns
\usepackage{multicol}

% for "on page NN" reference
\usepackage[nospace]{varioref}

% for \sfrac
\usepackage{xfrac}

% for \ifoptionfinal
\usepackage{ifdraft}

% do not reset page numbers at \mainmatter
\let\mainmatterorig\mainmatter
\renewcommand\mainmatter
 {\edef\p{\arabic{page}}%
  \mainmatterorig
  % we need to compute the actual current page number. we know the page number
  % from _before_ we called \mainmatter. but what is it now? well, it is
  % certainly that +1. but we also need to account for the next chapter starting
  % on a "right" (odd) page. we do this by adding the page number modulo two.
  % TODO: double check before final version
  \setcounter{page}{\p+1+(\p-\p/2*2)}%
 }

% an environment for todos
\newenvironment{inprogress}
  {\vspace{.5em} \color{set2} \noindent \textbf{TODO}}
  {\vspace{.5em}}

% a command to indicate current editing progress
\newcommand{\resume}{
  \begin{center}
    \color{set2}
    \hrule
    \vspace{1pt}
    \hrule
    \hrule
    \vspace{10pt}
    \textbf{This section is not yet complete.}
    \vspace{10pt}
    \hrule
    \hrule
    \vspace{1pt}
    \hrule
  \end{center}
}

% an environment for invariants
\newcounter{invn}
\renewcommand{\theinvn}{\Roman{invn}}
\newenvironment{invariant}
  {\vspace{.5em} \color{set1} \refstepcounter{invn} \noindent \textbf{\color{set1} Invariant \Roman{invn}.}}
  {\vspace{.5em}}

% for handy reference
%
% paragraph without spacing:
% \setparsizes{0pt}{0pt}{0pt plus 1fil}

\interfootnotelinepenalty=10000

\newcommand{\cut}[1]{}
%
\newcommand{\paragrapha}[1]{\vspace{0.05in}\noindent{\bf #1.}}
\newcommand{\paragraphi}[1]{\noindent\textit{#1.}}
\newcommand{\paragraphn}[1]{\noindent\textit{#1}}
\newcommand{\ct}[1]{{\texttt{#1}}}
%
\newcommand{\eg}{e.g., }
\newcommand{\etc}{{etc.}\xspace}
\newcommand{\ie}{i.e., }
\newcommand{\ccp}{CCP\xspace}
%
\newcommand{\datapath}{datapath\xspace}
\newcommand{\datapaths}{datapaths\xspace}
\newcommand{\Datapaths}{Datapaths\xspace}
\newcommand{\Datapath}{Datapath\xspace}
\newcommand{\handlers}{callbacks\xspace}
\newcommand{\userspace}{user-space\xspace}
\newcommand{\kernelspace}{kernel-space\xspace}
%
\newcommand{\controller}{agent\xspace}
